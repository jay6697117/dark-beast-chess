<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="暗兽棋 - 一款基于食物链机制的策略棋类游戏，支持翻棋定色和回合制玩法">
    <meta name="keywords" content="暗兽棋,棋类游戏,策略游戏,翻牌游戏">
    <meta name="theme-color" content="#0d1117">
    <title>暗兽棋 - Dark Beast Chess</title>
    <link rel="stylesheet" href="styles.css">
    <!-- 预加载关键资源 -->
    <link rel="preload" href="game.js" as="script">
</head>
<body>
    <!-- 跳过导航链接 (可访问性) -->
    <a href="#main-game" class="sr-only">跳转到主游戏区域</a>

    <div class="game-container" role="application" aria-label="暗兽棋游戏">
        <!-- 左侧控制面板 -->
        <aside class="game-sidebar-left" role="complementary" aria-label="游戏控制面板">
            <header class="game-header">
                <h1 class="game-title" id="game-title">暗兽棋</h1>
                <p class="game-subtitle">Dark Beast Chess</p>
            </header>

            <section class="game-info" aria-labelledby="game-status-heading">
                <h2 id="game-status-heading" class="sr-only">游戏状态信息</h2>

                <div class="phase-indicator"
                     id="phaseIndicator"
                     role="status"
                     aria-live="polite"
                     aria-label="当前游戏阶段">
                    游戏准备中
                </div>

                <div class="current-player"
                     id="currentPlayerInfo"
                     role="status"
                     aria-live="polite"
                     aria-label="当前玩家信息">
                    <!-- <div class="player-indicator" id="playerIndicator" aria-hidden="true"></div> -->
                    <span id="playerText">点击开始游戏</span>
                </div>
            </section>

            <section class="game-controls" aria-labelledby="controls-heading">
                <h2 id="controls-heading" class="sr-only">游戏控制</h2>
                <button class="btn btn-primary"
                        id="startBtn"
                        onclick="gameController.startGame()"
                        aria-describedby="start-btn-desc">
                    开始游戏
                </button>
                <div id="start-btn-desc" class="sr-only">开始新的暗兽棋游戏</div>

                <button class="btn btn-secondary"
                        id="resetBtn"
                        onclick="gameController.resetGame()"
                        aria-describedby="reset-btn-desc">
                    重新开始
                </button>
                <div id="reset-btn-desc" class="sr-only">重置当前游戏到初始状态</div>
            </section>

            <!-- 游戏规则移动到左侧底部 -->
            <section class="rules-section" aria-labelledby="rules-section-heading-left">
                <details class="game-rules" open>
                    <summary>
                        <h2 id="rules-section-heading-left">游戏规则</h2>
                    </summary>
                    <ul role="list">
                        <li>翻开第一枚棋子决定颜色</li>
                        <li>每回合可选择翻棋或走棋</li>
                        <li>食物链规则：象>狮>虎>豹>狼>狗>猫>鼠</li>
                        <li>特殊：鼠可以吃象</li>
                        <li>同类相遇同归于尽</li>
                    </ul>
                </details>
            </section>
        </aside>

        <!-- 中间棋盘区域 -->
        <main class="game-main" id="main-game" role="main" aria-labelledby="board-heading">
            <h2 id="board-heading" class="sr-only">游戏棋盘</h2>

            <div class="game-board"
                 id="gameBoard"
                 role="grid"
                 aria-label="4×4游戏棋盘"
                 aria-describedby="board-instructions">
                <!-- 棋盘格子将由JavaScript动态生成 -->
            </div>
            <div id="board-instructions" class="sr-only">
                使用鼠标点击或键盘导航来选择和移动棋子。使用Tab键在棋子间导航，使用方向键在格子间移动，按Enter键确认选择。
            </div>

        </main>

        <!-- 右侧信息面板 -->
        <aside class="game-sidebar-right" role="complementary" aria-label="游戏信息和消息面板">
            <!-- 回合指示信息 -->
            <section class="turn-info" aria-labelledby="turn-info-heading">
                <h2 id="turn-info-heading" class="sr-only">回合信息</h2>
                <div class="turn-indicator" id="turnIndicator" role="status" aria-live="polite">
                    <h3 class="turn-title" id="turnTitle">点击开始游戏</h3>
                </div>
            </section>

            <!-- 游戏统计 -->
            <section class="game-stats-section" aria-labelledby="stats-section-heading">
                <h2 id="stats-section-heading">游戏统计</h2>
                <div class="game-stats" aria-labelledby="stats-heading">
                    <h3 id="stats-heading" class="sr-only">统计数据</h3>
                    <div class="stat-item">
                        <span class="stat-label">红方棋子:</span>
                        <span class="stat-value" id="redPieces" aria-label="红方剩余棋子数量">8</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">蓝方棋子:</span>
                        <span class="stat-value" id="bluePieces" aria-label="蓝方剩余棋子数量">8</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">回合数:</span>
                        <span class="stat-value" id="turnCount" aria-label="当前回合数">0</span>
                    </div>
                </div>
            </section>

            <!-- 游戏消息移动到右侧 -->
            <section class="game-messages"
                     id="gameMessages"
                     role="log"
                     aria-live="polite"
                     aria-labelledby="messages-heading"
                     aria-describedby="messages-desc">
                <h3 id="messages-heading" class="sr-only">游戏消息</h3>
                <div id="messages-desc" class="sr-only">显示游戏进程和操作反馈的消息区域</div>
                <div class="message-item" role="listitem">
                    欢迎来到暗兽棋！点击开始游戏按钮开始。
                </div>
            </section>
        </aside>
    </div>

    <!-- 胜利对话框 -->
    <div class="modal"
         id="victoryModal"
         role="dialog"
         aria-modal="true"
         aria-labelledby="victory-title"
         aria-describedby="victory-message">
        <div class="modal-content">
            <h2 id="victory-title">游戏结束</h2>
            <p id="victory-message">恭喜获胜！</p>
            <div class="modal-buttons" role="group" aria-label="游戏结束选项">
                <button class="btn btn-primary"
                        onclick="gameController.resetGame(); closeModal()"
                        aria-label="开始新游戏">
                    再来一局
                </button>
                <button class="btn btn-secondary"
                        onclick="closeModal()"
                        aria-label="关闭对话框">
                    关闭
                </button>
            </div>
        </div>
    </div>

    <!-- 焦点指示器 -->
    <div class="focus-indicator" id="focusIndicator" aria-hidden="true"></div>

    <script src="game.js"></script>
</body>
</html>
